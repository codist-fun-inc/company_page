# Basic security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-XSS-Protection "1; mode=block"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set Strict-Transport-Security "max-age=31536000; includeSubDomains"
</IfModule>

# Basic directory settings
DirectoryIndex index.html index.php
Options -Indexes

# Enable rewrite engine
RewriteEngine On
RewriteBase /

# Redirect HTTP to HTTPS and non-www to www
RewriteCond %{HTTP_HOST} !^www\. [NC,OR]
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^(?:www\.)?(.+)$ [NC]
RewriteRule ^ https://www.%1%{REQUEST_URI} [R=301,L]

# Redirect root to src/index.html
RewriteRule ^$ src/index.html [R=302,L]

# Custom error pages
ErrorDocument 404 /src/404.html
ErrorDocument 500 /src/500.html

# Cache control for static assets
<FilesMatch "\.(ico|pdf|jpg|jpeg|png|gif|js|css)$">
    Header set Cache-Control "max-age=31536000, public"
</FilesMatch>

# Compress text files
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript application/x-javascript text/javascript
</IfModule> 